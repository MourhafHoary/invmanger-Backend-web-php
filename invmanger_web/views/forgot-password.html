<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reset Password | Inventory Manager</title>
  <link rel="stylesheet" href="../public/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="auth-container">
    <div class="auth-header">
      <h1>Reset Password</h1>
      <p id="step-description">Enter your email to reset your password</p>
    </div>
    
    <form id="forgotPasswordForm" class="auth-form">
      <!-- Step 1: Email Input -->
      <div id="step1" class="form-step active">
        <div class="form-group">
          <input type="email" id="email" placeholder="Email" required>
          <label for="email">Email</label>
        </div>
        
        <button type="button" class="btn" id="requestCodeBtn">
          <span id="requestCodeBtnText">Send Reset Code</span>
          <span id="requestCodeSpinner" class="spinner" style="display: none;"></span>
        </button>
      </div>
      
      <!-- Step 2: Verification Code Input -->
      <div id="step2" class="form-step">
        <div class="form-group">
          <div class="verification-code-container">
            <input type="text" id="digit1" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
            <input type="text" id="digit2" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
            <input type="text" id="digit3" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
            <input type="text" id="digit4" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
            <input type="text" id="digit5" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
            <input type="text" id="digit6" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
          </div>
          <input type="hidden" id="verificationCode">
        </div>
        
        <div class="resend-code">
          <span>Didn't receive the code?</span>
          <button type="button" id="resendCodeBtn" class="link-btn">Resend Code</button>
          <span id="resendTimer" style="display: none;">Resend in <span id="timerCount">60</span>s</span>
        </div>
        
        <button type="button" class="btn" id="verifyCodeBtn">
          <span id="verifyCodeBtnText">Verify Code</span>
          <span id="verifyCodeSpinner" class="spinner" style="display: none;"></span>
        </button>
      </div>
      
      <!-- Step 3: New Password Input -->
      <div id="step3" class="form-step">
        <div class="form-group">
          <input type="password" id="newPassword" placeholder="New Password" required>
          <label for="newPassword">New Password</label>
          <div class="password-toggle">
            <i class="fas fa-eye-slash" id="toggleNewPassword"></i>
          </div>
          <div class="password-strength" id="passwordStrength">
            <div class="strength-meter">
              <div class="strength-meter-fill" id="strengthMeter"></div>
            </div>
            <span id="strengthText">Password strength</span>
          </div>
        </div>
        
        <div class="form-group">
          <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
          <label for="confirmPassword">Confirm Password</label>
        </div>
        
        <button type="button" class="btn" id="resetPasswordBtn">
          <span id="resetPasswordBtnText">Reset Password</span>
          <span id="resetPasswordSpinner" class="spinner" style="display: none;"></span>
        </button>
      </div>
      
      <div id="message" class="message" style="display: none;"></div>
      
      <div class="auth-footer">
        <a href="login.html">Back to Login</a>
      </div>
    </form>
  </div>
  
  <script src="../public/js/api.js"></script>
  <script src="../public/js/forgot-password.js"></script>
</body>
</html>
